(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,a){e.exports=a(339)},167:function(e,t,a){},185:function(e,t,a){e.exports={login:"login_login__3KN-O","login-form":"login_login-form__3Tn6p","login-form-forgot":"login_login-form-forgot__1xEZO","login-form-button":"login_login-form-button__2esbM"}},314:function(e,t,a){e.exports={page:"addArticle_page__1BBlu",menus:"addArticle_menus__N_WTl","title-input":"addArticle_title-input__1PU0x",writeButton:"addArticle_writeButton__3uTHU",editor:"addArticle_editor__1bFki"}},315:function(e,t,a){e.exports={page:"articleList_page__3WvAi",body:"articleList_body__MSO8r",articleItem:"articleList_articleItem__1StOI",metaList:"articleList_metaList__2ITQA",metaItem:"articleList_metaItem__VJ8Gl",articleTitle:"articleList_articleTitle__1ISZG"}},329:function(e,t,a){e.exports={page:"articleDetail_page__3UJD3",articleBody:"articleDetail_articleBody__2XS-Q"}},339:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),i=(a(166),a(167),a(39)),o=a(40),s=a(20),u=a.n(s),m=a(32),p=a(345),d=a(343),g=a(12),f=a(344),v=a(80),b=a(54),E=a.n(b),h=a(148),_=a.n(h).a.create({baseURL:"",timeout:3e4,headers:{"X-Custom-Header":"foobar"}});_.interceptors.request.use(function(e){return console.log(e,"======"),e.headers.common.loginedtoken=localStorage.getItem("loginedtoken")||"",e}),_.interceptors.response.use(function(e){return 1005===e.data.code&&location.replace("/login"),e});var y=_,k=a(185),w=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/api/oa/user/login",t);case 2:if(a=e.sent,0===(n=a.data).code){e.next=7;break}return p.a.warning(n.msg),e.abrupt("return",!1);case 7:localStorage.setItem("loginedtoken",n.data.token),location.replace("/");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=E.a.create({})(function(e){var t=e.form.getFieldDecorator;return r.a.createElement("div",{className:k.login},r.a.createElement(E.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var a={name:t.username,password:t.password};w(a)}})},className:k["login-form"]},r.a.createElement("h2",null,"\u767b \u9646"),r.a.createElement(E.a.Item,null,t("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(d.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(E.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(d.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(E.a.Item,null,t("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(f.a,null,"Remember me")),r.a.createElement(v.a,{type:"primary",htmlType:"submit",className:k["login-form-button"]},"Log in"))))}),L=function(){return r.a.createElement("div",null,"errorView404")},N=a(41),O=a(152),I=a.n(O),S=a(42),j=a.n(S),A=a(314),B=a(341),T=a(315),C=function(){var e=Object(n.useState)([]),t=Object(N.a)(e,2),a=t[0],l=t[1],c=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/api/article/articleList");case 3:if(t=e.sent,0===(a=t.data).code){e.next=7;break}return e.abrupt("return",!1);case 7:l(a.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),p.a.error("\u670d\u52a1\u9519\u8bef");case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){c()},[]),r.a.createElement("div",{className:T.page},r.a.createElement(B.a,{bodyStyle:{padding:"1px 0px"},className:T.body,title:"\u6587\u7ae0\u5217\u8868",bordered:!1},a.map(function(e){return t=e,r.a.createElement(i.b,{key:t._id,to:"/articleDetail/"+t._id},r.a.createElement(B.a,{bordered:!1,className:T.articleItem,bodyStyle:{padding:"10p 240px"}},r.a.createElement("div",null,r.a.createElement("div",{className:T.metaList},r.a.createElement("span",{className:T.metaItem},t.user.name),r.a.createElement("span",{className:T.metaItem},t.updated)),r.a.createElement("h2",{className:T.articleTitle},t.title))));var t})))},D=a(322);D.registerLanguage("css",a(323)),D.registerLanguage("json",a(324)),D.registerLanguage("less",a(325)),D.registerLanguage("scss",a(326)),D.registerLanguage("javascript",a(327)),D.registerLanguage("typescript",a(328));var P=D;j.a.setOptions({renderer:new j.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(e){return P.highlightAuto(e).value}});var R=new j.a.Renderer;R.paragraph=function(e){return"<p>".concat(e,"</p>")},R.link=function(e,t,a){return"<a href=".concat(e,"\n      title=").concat(t||e,"\n      target='_blank'\n      }>").concat(a,"</a>")};var U=a(329),F=[{path:"/",component:function(){return Object(n.useEffect)(function(){location.replace("/article/addArticle")}),r.a.createElement("div",null,"home page")}},{path:"/login",component:x,noAuth:!0,noLoyout:!0},{path:"/article/list",component:C},{path:"/article/addArticle",component:function(){var e=Object(n.useState)(""),t=Object(N.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(N.a)(c,2),o=i[0],s=i[1],d=function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.put("/api/article/addArticle",{markdown:a,html:j()(a),title:o});case 3:0===e.sent.data.code?(p.a.success("\u63d0\u4ea4\u6210\u529f"),location.replace("/article/list")):p.a.warning("\u63d0\u4ea4\u5931\u8d25"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.a.error("\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5\uff01");case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:A.page},r.a.createElement("div",{className:A.menus},r.a.createElement("input",{type:"text",value:o,onChange:function(e){s(e.target.value)},placeholder:"\u8f93\u5165\u6587\u7ae0\u6807\u9898...",className:A["title-input"]}),r.a.createElement(v.a,{size:"large",type:"primary",className:A.writeButton,onClick:d},"\u4fdd\u5b58")),r.a.createElement("div",{className:A.editor},r.a.createElement(I.a,{preview:!0,subfield:!0,value:a,onChange:function(e){l(e)}})))}},{path:"/articleDetail/:id",component:function(e){var t,a=e.match,l=Object(n.useState)({html:"",markdown:""}),c=Object(N.a)(l,2),i=c[0],o=c[1],s=function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/api/article/articleById/"+a.params.id);case 3:t=e.sent,0===(n=t.data).code?o(n.data):p.a.warning(n.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){s()},[]),r.a.createElement("div",{className:U.page},r.a.createElement(B.a,{bordered:!1,className:U.articleBody+" for-container",bodyStyle:{padding:"10p 240px"}},r.a.createElement("div",{className:"for-preview for-markdown-preview",dangerouslySetInnerHTML:{__html:(t=i.markdown,"string"!==typeof t?"":j()(t,{renderer:R}))}})))}},{path:"/404",component:L,noAuth:!0}],H=a(340),J=a(342),M=function(e){var t=function(e){var t=e.key,a=e.icon,n=e.title;return r.a.createElement(J.b.Item,{key:t},r.a.createElement(i.b,{to:t},r.a.createElement("div",{onClick:function(){}},a&&r.a.createElement(g.a,{type:a}),r.a.createElement("span",null,n))))};return r.a.createElement(J.b,{theme:"dark",mode:"inline"},e.menus&&e.menus.map(function(e){return e.subs&&e.subs.length>0?function e(a){var n=a.key,l=a.icon,c=a.title,i=a.subs;return r.a.createElement(J.b.SubMenu,{key:n,title:r.a.createElement("span",null,l&&r.a.createElement(g.a,{type:l}),r.a.createElement("span",null,c))},i&&i.map(function(a){return a.subs&&a.subs.length>0?e(a):t(a)}))}(e):t(e)}))},W={logo:{height:"32px",background:"rgba(255, 255, 255, .2)",margin:"16px"}},q=[{title:"\u9996\u9875",icon:"home",key:"/home"},{title:"\u6587\u7ae0",icon:"laptop",key:"article",subs:[{key:"/article/list",title:"\u5217\u8868",icon:""},{key:"/article/addArticle",title:"\u5199\u6587\u7ae0",icon:""}]}],V=function(){return r.a.createElement("div",{style:{height:"100vh",overflowY:"scroll"}},r.a.createElement("div",{style:W.logo}),r.a.createElement(M,{menus:q}))},z=H.a.Sider,G=H.a.Header,Q=H.a.Content,X=H.a.Footer,Z=function(e){return r.a.createElement(H.a,null,r.a.createElement(z,{collapsible:!0,trigger:null,collapsed:!1},r.a.createElement(V,null)),r.a.createElement(H.a,null,r.a.createElement(G,{style:{background:"#fff",padding:"0 16px"}}),r.a.createElement(Q,null,e.children),r.a.createElement(X,{style:{textAlign:"center",padding:0}},"React-Admin \xa92018 Created by a910102423@gmail.com"," ")))},K=function(e){var t=e.location.pathname;F.find(function(e){return e.path===t});return r.a.createElement("div",{style:{height:"100%"}},F.map(function(e,t){var a=e.component;return r.a.createElement(o.a,{exact:!0,key:t,path:e.path,render:function(t){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"loading...")},e.noLoyout?r.a.createElement(a,t):r.a.createElement(Z,null,r.a.createElement(a,t)))}})}))},Y=function(){return n.createElement(i.a,null,n.createElement(o.c,null,n.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[161,1,2]]]);
//# sourceMappingURL=main.421d4269.chunk.js.map